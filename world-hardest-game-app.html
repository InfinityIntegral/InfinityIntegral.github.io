<!DOCTYPE html>
<html lang="en-SU">
	<head>
		<meta charset="utf-8">
		<title>World's Hardest Game</title>
		<script type="text/javascript" src="CanvasInput.js"></script>
		<link rel="icon" type="image/x-icon" href="favicon.ico"></link>
		<style>
			body{
				background-color: #FF00C8;
				color: #00C8FF;
				font-family: "Arial";
				overflow: hidden;
				line-height: 1.2;
				vertical-align: baseline;
				-webkit-touch-callout: none; /* iOS Safari */
    				-webkit-user-select: none; /* Safari */
    				-khtml-user-select: none; /* Konqueror HTML */
    				-moz-user-select: none; /* Firefox */
    				-ms-user-select: none; /* Internet Explorer/Edge */
    				user-select: none; /* Non-prefixed version, currently supported by most browsers */
       	     }
		</style>
	</head>
	<body>
		<canvas style="width:100%;height:window.innerHeight" id="x"></canvas>
		<script>
			const k = document.getElementById("x");
			const draw = document.getElementById("x").getContext("2d");
			draw.canvas.width = window.innerWidth;
			draw.canvas.height = window.innerHeight;
			const w = draw.canvas.width;
			const h = draw.canvas.height;

			let gamestate = -1;
			let fps;
			let objax = [30,90,150,210,270,270,270,270,270,210,150,90,30,30,30,30];
			let objay = [30,30,30,30,30,90,150,210,270,270,270,270,270,210,150,90];
			let objbx = [150];
			let objby = [75];
			let objcx = [210,210,210];
			let objcy = [90,150,210];
			let a1 = 0;
			let a2 = 0;
			let a3 = 0;
			let arrdisplay = [];
			let dist, angle, posx, posy, posa;
			posx = 90;
			posy = 90;
			posa = 0;
			let arad, colr, colg, colb, col, objangle;
			let t=0;
			let posfx, posfy, canmove;
			let gamelost = 0;
			let time0, time1, wintime, wintext;
			let coord;

			const eventfunc0 = function(evt){
				mousex = evt.clientX - k.getBoundingClientRect().left;
				mousey = evt.clientY - k.getBoundingClientRect().top;
				if(gamestate==-1 && mousex>=w/2-150 && mousex<=w/2+150 && mousey>=h/2-30 && mousey<= h/2+30){
					gamestate = 100;
					k.removeEventListener("click",eventfunc0);
					k.addEventListener("click",eventfunc100);
					display100();
				}
				else if (gamestate==-1 && mousex<=100 && mousey<=100){
					gamestate = 0;
					time0 = Date.now();
					k.removeEventListener("click",eventfunc0);
					gameplay();
				}
			}

			function startscreen(){
				draw.fillStyle = "#00C8FF";
				draw.textAlign = "center";
				draw.font = "80px Arial";
				draw.fillText("World's Hardest Game", w/2, h/4);
				draw.font = "25px Arial";
				draw.fillText("a video game programmed by Infinity Integral", w/2, h/4+30);
				draw.fillRect(w/2-150, h/2-30, 300, 60);
				draw.fillStyle = "#FF00C8";
				draw.font = "50px Arial";
				draw.fillText("start game",w/2,h/2+10);

				k.addEventListener("click", eventfunc0);
			}

			const eventfunc100 = function(evt){
				mousex = evt.clientX - k.getBoundingClientRect().left;
				mousey = evt.clientY - k.getBoundingClientRect().top;
				if(gamestate==100 && mousex>=w-300 && mousex<=w-100 && mousey>=h-140 && mousey<=h-100){
					gamestate = 101;
					k.removeEventListener("click",eventfunc100);
					k.addEventListener("click",eventfunc101);
					display101();
				}
			}

			function display100(){
        			draw.fillStyle = "#FF00C8";
        			draw.fillRect(0,0,w,h);
        			draw.fillStyle = "#00C8FF";
        			draw.font = "30px Arial";
        			draw.textAlign = "center";
        
        			const maxWidth100 = w - 200;
        			const text100 = "Welcome, comrade, to the KGB headquarters, you have been selected to take part in a very difficult mission. More details will be given to you in a briefing later.";
        			let words100 = text100.split(' ');
        			let line100 = '';
        			let y100 = 70;
        
        			for (let i = 0; i < words100.length; i++) {
            				let testLine100 = line100 + words100[i] + ' ';
            				let metrics100 = draw.measureText(testLine100);
            				let testWidth100 = metrics100.width;
            				if (testWidth100 > maxWidth100 && i > 0) {
                				draw.fillText(line100, w / 2, y100);
                				line100 = words100[i] + ' ';
                				y100 += 30;
            				} else {
                				line100 = testLine100;
            				}
        			}
        			draw.fillText(line100, w / 2, y100);

				draw.fillRect(w-300, h-140, 200, 40);
				draw.fillStyle = "#FF00C8";
				draw.font = "30px Arial";
				draw.fillText("proceed", w-200, h-110);
    			}
		
			const eventfunc101 = function(evt){
    				mousex = evt.clientX - k.getBoundingClientRect().left;
    				mousey = evt.clientY - k.getBoundingClientRect().top;
    				if(gamestate==101 && mousex>=w-300 && mousex<=w-100 && mousey>=h-140 && mousey<=h-100){
        				gamestate = 102;
        				k.removeEventListener("click",eventfunc101);
					k.addEventListener("click",eventfunc102);
        				display102();
    				}
			}

			function display101(){
    				draw.fillStyle = "#FF00C8";
    				draw.fillRect(0,0,w,h);
    				draw.fillStyle = "#00C8FF";
    				draw.font = "30px Arial";
    				draw.textAlign = "center";

    				const maxWidth101 = w - 200;
    				const text101 = "To prevent America from launching a nuclear attack on the Soviet Union and destroying the world, the Soviet leadership has decided to disable their missile systems. We have created some form of lower dimensional portal directly into their systems. You will travel through this portal to the system and turn off the power to it. The portal is in the form of a series of 30 2-dimensional rooms. To help you with distance perception, each room is filled with a substance that absorbes light, so the further something is, the darker it will appear to be. The walls are pink colour, and you will need to collect all yellow circles in each room to activate the mechanism to enter the next room. Due to some imperfections in creating the portals, there may be blue circles that will cause you to exit the portal and lose all collected yellow circles in that room. Do not touch the blue circles. When the last yellow circle is collected, the power supply to their systems will be disabled and your mission will be completed.";
    				let words101 = text101.split(' ');
    				let line101 = '';
    				let y101 = 70;

    				for (let i = 0; i < words101.length; i++) {
        				let testLine101 = line101 + words101[i] + ' ';
        				let metrics101 = draw.measureText(testLine101);
        				let testWidth101 = metrics101.width;
        				if (testWidth101 > maxWidth101 && i > 0) {
            					draw.fillText(line101, w / 2, y101);
            					line101 = words101[i] + ' ';
            					y101 += 30;
        				} else {
            					line101 = testLine101;
        				}
    				}
    				draw.fillText(line101, w / 2, y101);

    				draw.fillRect(w-300, h-140, 200, 40);
    				draw.fillStyle = "#FF00C8";
    				draw.font = "30px Arial";
    				draw.fillText("proceed", w-200, h-110);
			}

			const eventfunc102 = function(evt){
				mousex = evt.clientX - k.getBoundingClientRect().left;
				mousey = evt.clientY - k.getBoundingClientRect().top;
				if(gamestate==102 && mousex>=w-300 && mousex<=w-100 && mousey>=h-140 && mousey<=h-100){
					gamestate = 103;
					k.removeEventListener("click",eventfunc102);
					k.addEventListener("click",eventfunc103);
					display103();
    				}
			}

			function display102(){
    				draw.fillStyle = "#FF00C8";
    				draw.fillRect(0,0,w,h);
    				draw.fillStyle = "#00C8FF";
    				draw.font = "30px Arial";
    				draw.textAlign = "center";

    				const maxWidth102 = w - 200;
    				const text102 = "While in the portal, you will see a rectangular 1-dimensional display showing what is in front of you. Your field of view will be 90 degrees to avoid confusing you. Below the display is 3 buttons that you can use to move. The left button let you turn left, the right button make you turn right, and the centre circle allows you to move forwards. Obviously, you cannot jump as you are in a 2-dimensional space. Your movement system will automatically collect yellow circles when you touch them. However, if you accidentally touch a blue circle, all the yellow circles that you have collected will be lost and the level will restart. Your location, direction facing, and the number of yellow circles left in the room will be shown below the buttons.";
    				let words102 = text102.split(' ');
    				let line102 = '';
    				let y102 = 70;

    				for (let i = 0; i < words102.length; i++) {
        				let testLine102 = line102 + words102[i] + ' ';
       				let metrics102 = draw.measureText(testLine102);
        				let testWidth102 = metrics102.width;
        				if (testWidth102 > maxWidth102 && i > 0) {
            					draw.fillText(line102, w / 2, y102);
            					line102 = words102[i] + ' ';
            					y102 += 30;
        				} else {
            					line102 = testLine102;
        				}
    				}
    				draw.fillText(line102, w / 2, y102);

    				draw.fillRect(w-300, h-140, 200, 40);
    				draw.fillStyle = "#FF00C8";
    				draw.font = "30px Arial";
    				draw.fillText("proceed", w-200, h-110);
			}

			const eventfunc103 = function(evt){
    				mousex = evt.clientX - k.getBoundingClientRect().left;
    				mousey = evt.clientY - k.getBoundingClientRect().top;
    				if(gamestate==103 && mousex>=w-300 && mousex<=w-100 && mousey>=h-140 && mousey<=h-100){
        				gamestate = 0;
        				k.removeEventListener("click",eventfunc103);
					time0 = Date.now()
        				gameplay();
    				}
			}

			function display103(){
    				draw.fillStyle = "#FF00C8";
    				draw.fillRect(0,0,w,h);
    				draw.fillStyle = "#00C8FF";
    				draw.font = "30px Arial";
    				draw.textAlign = "center";

    				const maxWidth103 = w - 200;
    				const text103 = "Before starting on the actual mission, you will first attempt a training mission. You will be on the left of a 2-dimensional room, with a blue circle moving across the center. Your task is to move past the blue circle to collect 3 yellow circles on the right of the room. Press the proceed button to enter the training room.";
    				let words103 = text103.split(' ');
    				let line103 = '';
    				let y103 = 70;

    				for (let i = 0; i < words103.length; i++) {
        				let testLine103 = line103 + words103[i] + ' ';
        				let metrics103 = draw.measureText(testLine103);
        				let testWidth103 = metrics103.width;
        				if (testWidth103 > maxWidth103 && i > 0) {
            					draw.fillText(line103, w / 2, y103);
            					line103 = words103[i] + ' ';
            					y103 += 30;
        				} else {
            					line103 = testLine103;
        				}
    				}
    				draw.fillText(line103, w / 2, y103);

    				draw.fillRect(w-300, h-140, 200, 40);
    				draw.fillStyle = "#FF00C8";
    				draw.font = "30px Arial";
    				draw.fillText("proceed", w-200, h-110);
			}

			class triple {
				constructor(inputx, inputy, inputz){
					this.x = inputx;
					this.y = inputy;
					this.z = inputz;
				}
			}

			function startmove(x0,y0){
				if (gamestate>=0 && gamestate<=30 && y0>=h/2 && y0<=h){
					if (x0>=w/8 && x0<3*w/8){a1=1;}
					else if (x0>=3*w/8 && x0<5*w/8){a2=1;}
					else if (x0>=5*w/8 && x0<7*w/8){a3=1;}
    				}
			}

			function endmove(x0,y0){
				if (gamestate>=0 && gamestate<=30 && y0>=h/2 && y0<=h){
					if (x0>=w/8 && x0<3*w/8){a1=0;}
					else if (x0>=3*w/8 && x0<5*w/8){a2=0;}
					else if (x0>=5*w/8 && x0<7*w/8){a3=0;}
    				}
			}

			function gameplay(){
				draw.fillStyle = "#FF00C8";
				draw.fillRect(0,0,w,h);
				draw.fillStyle = "#00C8FF";
				draw.font = "20px Arial";
				draw.fillText("left",w/4,3*h/4-30);
				draw.fillText("forwards",w/2,3*h/4-30);
				draw.fillText("right",3*w/4,3*h/4-30);
				draw.fillRect(w/4-25,3*h/4-25,50,50);
				draw.fillRect(w/2-25,3*h/4-25,50,50);
				draw.fillRect(3*w/4-25,3*h/4-25,50,50);
				draw.strokeStyle = "#00C8FF";
				draw.beginPath();
				draw.moveTo(w/2,h/2);
				draw.lineTo(w/2,3*h/4);
				draw.stroke();

				// mouseup mousedown event listeners
				k.addEventListener("touchstart", function(evt) {
    					evt.preventDefault();
					for (let i=0; i<evt.touches.length; i++){
						mousex = evt.touches[i].clientX - k.getBoundingClientRect().left;
						mousey = evt.touches[i].clientY - k.getBoundingClientRect().top;
    						startmove(mousex, mousey);
					}
				});
				k.addEventListener("touchend", function(evt) {
    					evt.preventDefault();
					for (let i=0; i<evt.changedTouches.length; i++){
						mousex = evt.changedTouches[i].clientX - k.getBoundingClientRect().left;
						mousey = evt.changedTouches[i].clientY - k.getBoundingClientRect().top;
    						endmove(mousex, mousey);
					}
				});
				k.addEventListener("mousedown", function(evt){
					mousex = evt.clientX - k.getBoundingClientRect().left;
    					mousey = evt.clientY - k.getBoundingClientRect().top;
					startmove(mousex,mousey);
				});
				k.addEventListener("mouseup", function(evt){
					mousex = evt.clientX - k.getBoundingClientRect().left;
    					mousey = evt.clientY - k.getBoundingClientRect().top;
					endmove(mousex,mousey);
				});

				fps = setInterval(gamedisplay, 20);
			}
	
			function gamedisplay(){

				// movement of blue circles	
				t++;
				if (gamestate == 0){
					if (t==60){t=0;}
					if (t<30){
						objby[0] += 5;
					}
					else {objby[0] -= 5;}
				}
				else if (gamestate == 1){
					if (t==108){t=0;}
					if (t<54){
						objbx[0] += 10;
						objbx[1] += 10;
						objbx[2] -= 10;
						objbx[3] -= 10;
					}
					else {
						objbx[0] -= 10;
						objbx[1] -= 10;
						objbx[2] += 10;
						objbx[3] += 10;
					}
				}
				else if (gamestate == 2){
					if(t==132){t=0;}
					if(t<66){
						for (let i=0; i<6; i++){objby[i]+=5;}
						for (let i=6; i<12; i++){objby[i]-=5;}
					}
					else{
						for (let i=0; i<6; i++){objby[i]-=5;}
						for (let i=6; i<12; i++){objby[i]+=5;}
					}
				}
				else if (gamestate == 3){
					if(t==144){t = 0;}
					for (let i=0; i<11; i++){
						if((12*i+t)%144<24 || (12*i+t)%144>=132){objbx[i]+=5;}
						else if((12*i+t)%144<60 && (12*i+t)%144>=24){objby[i]+=5;}
						else if((12*i+t)%144<96 && (12*i+t)%144>=60){objbx[i]-=5;}
						else if((12*i+t)%144<132 && (12*i+t)%144>=96){objby[i]-=5;}
					}
				}
				else if (gamestate == 4){
					if (t==150){t=0;}
					for (let i=1; i<=6; i++){
						objbx[i] = 480 + 40*i*Math.cos(t*Math.PI/75 + Math.PI/2);
						objby[i] = 480 + 40*i*Math.sin(t*Math.PI/75 + Math.PI/2);
					}
					for (let i=7; i<=12; i++){
						objbx[i] = 480 + 40*(i-6)*Math.cos(t*Math.PI/75 + Math.PI);
						objby[i] = 480 + 40*(i-6)*Math.sin(t*Math.PI/75 + Math.PI);
					}
					for (let i=13; i<=18; i++){
						objbx[i] = 480 + 40*(i-12)*Math.cos(t*Math.PI/75 + 3*Math.PI/2);
						objby[i] = 480 + 40*(i-12)*Math.sin(t*Math.PI/75 + 3*Math.PI/2);
					}
					for (let i=19; i<=24; i++){
						objbx[i] = 480 + 40*(i-18)*Math.cos(t*Math.PI/75);
						objby[i] = 480 + 40*(i-18)*Math.sin(t*Math.PI/75);
					}
				}
				else if (gamestate == 5){
					if (t==300){t=0;}
					for (let i=0; i<=3; i++){
						objbx[i] = 570 + 120*(i+1)*Math.cos(t*Math.PI/150 + Math.PI/2);
						objby[i] = 360 + 120*(i+1)*Math.sin(t*Math.PI/150 + Math.PI/2);
					}
					for (let i=4; i<=7; i++){
						objbx[i] = 570 + 120*(i-3)*Math.cos(t*Math.PI/150 + Math.PI);
						objby[i] = 360 + 120*(i-3)*Math.sin(t*Math.PI/150 + Math.PI);
					}
					for (let i=8; i<=11; i++){
						objbx[i] = 570 + 120*(i-7)*Math.cos(t*Math.PI/150 + 3*Math.PI/2);
						objby[i] = 360 + 120*(i-7)*Math.sin(t*Math.PI/150 + 3*Math.PI/2);
					}
					for (let i=12; i<=15; i++){
						objbx[i] = 570 + 120*(i-11)*Math.cos(t*Math.PI/150);
						objby[i] = 360 + 120*(i-11)*Math.sin(t*Math.PI/150);
					}
				}
				else if (gamestate == 6){
					if(t==130){t=0;}
					for(let i=0; i<72; i++){
						if(i<36){objby[i] = 180;}
						else {objby[i] = 540;}
						objbx[i] =300 + 240*((Math.floor(i/9))%4)
						if(i%9==1){
							objbx[i] += 52*Math.cos(t*Math.PI/65);
							objby[i] += 52*Math.sin(t*Math.PI/65);
						}
						else if(i%9==2){
							objbx[i] += 105*Math.cos(t*Math.PI/65);
							objby[i] += 105*Math.sin(t*Math.PI/65);
						}
						else if(i%9==3){
							objbx[i] += 52*Math.cos(t*Math.PI/65 + Math.PI/2);
							objby[i] += 52*Math.sin(t*Math.PI/65 + Math.PI/2);
						}
						else if(i%9==4){
							objbx[i] += 105*Math.cos(t*Math.PI/65 + Math.PI/2);
							objby[i] += 105*Math.sin(t*Math.PI/65 + Math.PI/2);
						}
						else if(i%9==5){
							objbx[i] += 52*Math.cos(t*Math.PI/65 + Math.PI);
							objby[i] += 52*Math.sin(t*Math.PI/65 + Math.PI);
						}
						else if(i%9==6){
							objbx[i] += 105*Math.cos(t*Math.PI/65 + Math.PI);
							objby[i] += 105*Math.sin(t*Math.PI/65 + Math.PI);
						}
						else if(i%9==7){
							objbx[i] += 52*Math.cos(t*Math.PI/65 + 3*Math.PI/2);
							objby[i] += 52*Math.sin(t*Math.PI/65 + 3*Math.PI/2);
						}
						else if(i%9==8){
							objbx[i] += 105*Math.cos(t*Math.PI/65 + 3*Math.PI/2);
							objby[i] += 105*Math.sin(t*Math.PI/65 + 3*Math.PI/2);
						}
					}
				}
				else if (gamestate == 7){
					if(t==90){t=0;}
					if(t<45){
						for (let i=0; i<6; i++){objby[i]+=10;}
						for (let i=6; i<12; i++){objby[i]-=10;}
					}
					else{
						for (let i=0; i<6; i++){objby[i]-=10;}
						for (let i=6; i<12; i++){objby[i]+=10;}
					}
				}
				else if (gamestate == 8){
					if (t==720){t=0;}
					if(t%144<36){
						for (let i=0; i<3; i++){objbx[i]+=5;}
						for (let i=3; i<6; i++){objbx[i]-=5;}
					}
					else if(t%144>=36 && t%144<72){
						for (let i=0; i<6; i++){objby[i]+=5;}
					}
					else if(t%144>=72 && t%144<108){
						for (let i=0; i<3; i++){objbx[i]-=5;}
						for (let i=3; i<6; i++){objbx[i]+=5;}
					}
					else if(t%144>=108){
						for (let i=0; i<6; i++){objby[i]-=5;}
					}
					if(t%240<36){objbx[6]+=5;}
					else if (t%240>=36 && t%240<120){objby[6]+=5;}
					else if (t%240>=120 && t%240<156){objbx[6]-=5;}
					else if (t%240>=156){objby[6]-=5;}
				}
				else if (gamestate == 9){
					if (t==168){t=0;}
					for(let i=15; i<=22; i++){
						if (t%24<6){objbx[i]+=10;}
						else if (t%24>=6 && t%24<12){objby[i]+=10;}
						else if (t%24>=12 && t%24<18){objbx[i]-=10;}
						else if (t%24>=18){objby[i]-=10;}
					}
					if (t%42<15){
						objby[23]+=10;
						objbx[24]+=10;
					}
					else if (t%42>=15 && t%42<21){
						objbx[23]-=10;
						objby[24]+=10;
					}
					else if (t%42>=21 && t%42<27){
						objbx[23]+=10;
						objby[24]-=10;
					}
					else if (t%42>=27){
						objby[23]-=10;
						objbx[24]-=10;
					}
				}
				else if (gamestate==10){
					if(t==36){t=0;}
					if (t<18){
						for(let i=0; i<=6; i++){objbx[i]-=5;}
						for (let i=7; i<=13; i++){objbx[i]+=5;}
						for (let i=14; i<=16; i++){objby[i]+=5;}
						for (let i=17; i<=18; i++){objby[i]-=5;}
					}
					else if (t>=18){
						for(let i=0; i<=6; i++){objbx[i]+=5;}
						for (let i=7; i<=13; i++){objbx[i]-=5;}
						for (let i=14; i<=16; i++){objby[i]-=5;}
						for (let i=17; i<=18; i++){objby[i]+=5;}
					}
				}
				else if (gamestate==11){
					if (t==200){t=0;}
					if (t%50<25){
						for (let i=0; i<=7; i++){
							objbx[i] = 540 + 40*(i+1)*Math.cos(Math.PI/2*Math.floor(t/50));
							objby[i] = 300 + 40*(i+1)*Math.sin(Math.PI/2*Math.floor(t/50));
						}
					}
					else if(t%50>=25){
						for (let i=0; i<=6; i++){
							objbx[i] = 540 + 40*(i+1)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50) + 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2);
							objby[i] = 300 + 40*(i+1)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50) + 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2);
						}
						for (let i=7; i<=13; i++){
							objbx[i] = 540 + 40*(i-6)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50) - 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2);
							objby[i] = 300 + 40*(i-6)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50) - 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2);
						}
						for (let i=14; i<=20; i++){
							objbx[i] = 540 + 40*(i-13)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2) + 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI);
							objby[i] = 300 + 40*(i-13)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2) + 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI);
						}
						for (let i=21; i<=27; i++){
							objbx[i] = 540 + 40*(i-20)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2) - 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI);
							objby[i] = 300 + 40*(i-20)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2) - 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI);
						}
						for (let i=28; i<=34; i++){
							objbx[i] = 540 + 40*(i-27)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI) + 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + 3*Math.PI/2);
							objby[i] = 300 + 40*(i-27)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI) + 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + 3*Math.PI/2);
						}
						for (let i=35; i<=41; i++){
							objbx[i] = 540 + 40*(i-34)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI) - 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + 3*Math.PI/2);
							objby[i] = 300 + 40*(i-34)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI) - 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + 3*Math.PI/2);
						}
						for (let i=42; i<=48; i++){
							objbx[i] = 540 + 40*(i-41)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + 3*Math.PI/2) + 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50);
							objby[i] = 300 + 40*(i-41)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + 3*Math.PI/2) + 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50);
						}
						for (let i=49; i<=55; i++){
							objbx[i] = 540 + 40*(i-48)*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50) - 20*Math.cos(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2);
							objby[i] = 300 + 40*(i-48)*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50) - 20*Math.sin(Math.PI/2*Math.floor(t/50) + Math.PI*(t%50-25)/50 + Math.PI/2);
						}
					}
				}
				else if (gamestate == 12){
					if (t==156){t=0;}
					if (t<78){
						objby[184]+=5;
						objby[185]+=5;
						objby[186]-=5;
						objby[187]-=5;
						objby[188]+=5;
						objby[189]+=5;
						objby[190]-=5;	
						objby[191]-=5;
					}
					else if (t>=78){
						objby[184]-=5;
						objby[185]-=5;
						objby[186]+=5;
						objby[187]+=5;
						objby[188]-=5;
						objby[189]-=5;
						objby[190]+=5;	
						objby[191]+=5;
					}
				}
				else if (gamestate==13){
					if(t==1254){t=0;}
					if(t%66<33){
						for(let i=0; i<=5; i++){objby[i]+=10;}
						for(let i=6; i<=11; i++){objby[i]-=10;}
					}
					else if (t%66>=33){
						for(let i=0; i<=5; i++){objby[i]-=10;}
						for(let i=6; i<=11; i++){objby[i]+=10;}
					}
					if(t%114<57){
						objbx[12]+=10;
						objbx[13]-=10;
					}
					else if(t%114>=57){
						objbx[12]-=10;
						objbx[13]+=10;
					}
				}
				else if (gamestate==14){
					if (t==1200){t=0;}
					if(t%48<24){
						objby[0]-=5;
						objby[1]-=5;									objby[2]+=5;
						objby[3]+=5;
						objby[4]-=5;
						objby[5]-=5;
					}
					else if (t%48>=24){
						objby[0]+=5;
						objby[1]+=5;									objby[2]-=5;
						objby[3]-=5;
						objby[4]+=5;
						objby[5]+=5;
					}
					for(let i=6; i<=41; i++){
						objbx[i] = 330 + 240*Math.floor((i-6)/9);
						objby[i] = 330;
						if(i%9==1){
							objbx[i] += 30*Math.cos((t%75)/75*2*Math.PI);
							objby[i] += 30*Math.sin((t%75)/75*2*Math.PI);
						}
						else if(i%9==2){
							objbx[i] += 60*Math.cos((t%75)/75*2*Math.PI);
							objby[i] += 60*Math.sin((t%75)/75*2*Math.PI);
						}
						else if(i%9==3){
							objbx[i] += 30*Math.cos((t%75)/75*2*Math.PI + Math.PI/2);
							objby[i] += 30*Math.sin((t%75)/75*2*Math.PI + Math.PI/2);
						}
						else if(i%9==4){
							objbx[i] += 60*Math.cos((t%75)/75*2*Math.PI + Math.PI/2);
							objby[i] += 60*Math.sin((t%75)/75*2*Math.PI + Math.PI/2);
						}
						else if(i%9==5){
							objbx[i] += 30*Math.cos((t%75)/75*2*Math.PI + Math.PI);
							objby[i] += 30*Math.sin((t%75)/75*2*Math.PI + Math.PI);
						}
						else if(i%9==6){
							objbx[i] += 60*Math.cos((t%75)/75*2*Math.PI + Math.PI);
							objby[i] += 60*Math.sin((t%75)/75*2*Math.PI + Math.PI);
						}
						else if(i%9==7){
							objbx[i] += 30*Math.cos((t%75)/75*2*Math.PI + Math.PI/2);
							objby[i] += 30*Math.sin((t%75)/75*2*Math.PI + Math.PI/2);
						}
						else if(i%9==8){
							objbx[i] += 60*Math.cos((t%75)/75*2*Math.PI + 3*Math.PI/2);
							objby[i] += 60*Math.sin((t%75)/75*2*Math.PI + 3*Math.PI/2);
						}
					}
				}
				else if (gamestate == 15){
					if (t==7410){t=0;}
					if(t%30<15){
						for (let i=0; i<=3; i++){objby[i] += 10;}
						objby[4] -= 10;
					}
					else if(t%30>=15){
						for (let i=0; i<=3; i++){objby[i] -= 10;}
						objby[4] += 10;
					}
					if (t%78<39){
						for (let i=5; i<=7; i++){objby[i] += 10;}
						for (let i=8; i<=10; i++){objby[i] -= 10;}
					}
					else if (t%78>=39){
						for (let i=5; i<=7; i++){objby[i] -= 10;}
						for (let i=8; i<=10; i++){objby[i] += 10;}
					}
					if (t%114<57){
						for (let i=11; i<=16; i++){objby[i] += 10;}
						for (let i=17; i<=19; i++){objby[i] -= 10;}
					}
					else if (t%114>=57){
						for (let i=11; i<=16; i++){objby[i] -= 10;}
						for (let i=17; i<=19; i++){objby[i] += 10;}
					}
				}
				else if (gamestate==16){
					if (t==48){t=0;}
					for (let i=0; i<20; i++){
						if(t<12){objbx[i]+=5;}
						else if (t>=12 && t<24){objby[i]+=5;}
						else if (t>=24 && t<36){objbx[i]-=5;}
						else if (t>=36){objby[i]-=5;}
					}
				}
				else if (gamestate ==17){
					if (t== 6156){t=0;}
					if(t%228<114){
						objby[0]+=5;
						objby[2]-=5;
						objby[4]-=5;
						objbx[5]+=5;
						objbx[6]+=5;
					}
					else if(t%228>=114){
						objby[0]-=5;
						objby[2]+=5;
						objby[4]+=5;
						objbx[5]-=5;
						objbx[6]-=5;
					}
					if (t%324<162){
						objbx[1]+=5;
						objbx[3]-=5;
					}
					else if (t%324>=162){
						objbx[1]-=5;
						objbx[3]+=5;
					}
				}
				else if (gamestate==18){
					if(t==84){t=0;}
					if(t<42){
						for (let i=0; i<=4; i++){objby[i]+=5;}
						for (let i=5; i<=9; i++){objby[i]-=5;}
					}
					else if(t>=42){
						for (let i=0; i<=4; i++){objby[i]-=5;}
						for (let i=5; i<=9; i++){objby[i]+=5;}
					}
				}
				else if (gamestate==19){
					if(t==132){t=0;}
					if (t<66){
						for(let i=0; i<=5; i++){objby[i]-=5;}
						for(let i=6; i<=11; i++){objby[i]+=5;}
					}
					else if (t>=66){
						for(let i=0; i<=5; i++){objby[i]+=5;}
						for(let i=6; i<=11; i++){objby[i]-=5;}
					}
				}
				else if (gamestate==20){
					if(t==924){t=0;}
					if(t%84<42){
						for (let i=0; i<=7; i++){objbx[i]+=5;}
					}
					else if(t%84>=42){
						for (let i=0; i<=7; i++){objbx[i]-=5;}
					}
					if(t%132<66){
						for (let i=8; i<=12; i++){objby[i]-=5;}
					}
					else if(t%132>=66){
						for (let i=8; i<=12; i++){objby[i]+=5;}
					}
				}
				else if (gamestate==21){
					if (t==360){t=0;}
					if (t%90<45){
						for (let i=0; i<=4; i++){objby[i]+=10;}
					}
					else if (t%90>=45){
						for (let i=0; i<=4; i++){objby[i]-=10;}
					}
					if (t%180<90){
						for (let i=5; i<=9; i++){objby[i]+=5;}
					}
					else if (t%180>=90){
						for (let i=5; i<=9; i++){objby[i]-=5;}
					}
					if (t<180){
						for (let i=10; i<=13; i++){objby[i]+=2.5;}
					}
					else if (t>=180){
						for (let i=10; i<=13; i++){objby[i]-=2.5;}
					}
				}
				else if (gamestate == 22){
					if(t==144){t=0;}
					if (t<60){
						objbx[0]+=5; objbx[1]-=5;
						objbx[4]+=5; objbx[5]-=5;
						objbx[8]+=5; objbx[9]-=5;
						objbx[16]+=5; objbx[17]-=5;
					}
					else if (t>=60 && t<72){
						objby[0]+=5; objby[1]-=5;
						objby[4]+=5; objby[5]-=5;
						objby[8]+=5; objby[9]-=5;
						objby[16]+=5; objby[17]-=5;
					}
					else if (t>=72 && t<132){
						objbx[0]-=5; objbx[1]+=5;
						objbx[4]-=5; objbx[5]+=5;
						objbx[8]-=5; objbx[9]+=5;
						objbx[16]-=5; objbx[17]+=5;
					}
					else if (t>=132){
						objby[0]-=5; objby[1]+=5;
						objby[4]-=5; objby[5]+=5;
						objby[8]-=5; objby[9]+=5;
						objby[16]-=5; objby[17]+=5;
					}
					if (t<12){
						objbx[12]+=5; objbx[13]-=5;
						objbx[20]+=5; objbx[21]-=5;
					}
					else if (t>=12 && t<72){
						objby[12]+=5; objby[13]-=5;
						objby[20]+=5; objby[21]-=5;
					}
					else if(t>=72 && t<84){
						objbx[12]-=5; objbx[13]+=5;
						objbx[20]-=5; objbx[21]+=5;
					}
					else if(t>=84){
						objby[12]-=5; objby[13]+=5;
						objby[20]-=5; objby[21]+=5;
					}
					if (t%48<12){
						for (let i=2; i<=22; i+=4){
							objbx[i] += 5;
							objbx[i+1] -= 5;
						}
					}
					else if (t%48>=12 && t%48<24){
						for (let i=2; i<=22; i+=4){
							objby[i] += 5;
							objby[i+1] -= 5;
						}
					}
					else if (t%48>=24 && t%48<36){
						for (let i=2; i<=22; i+=4){
							objbx[i] -= 5;
							objbx[i+1] += 5;
						}
					}
					else if (t%48>=36){
						for (let i=2; i<=22; i+=4){
							objby[i] -= 5;
							objby[i+1] += 5;
						}
					}
				}
				else if (gamestate == 23){
					if (t==376){t=0;}
					if (t<188){
						for (let i=1; i<=10; i++){
							objbx[i] = 360 + 33*i*Math.cos(Math.PI*t/94);
							objby[i] = 360 + 33*i*Math.sin(Math.PI*t/94);
						}
						for (let i=11; i<=20; i++){
							objbx[i] = 360 + 33*(i-10)*Math.cos(Math.PI*t/94 + Math.PI/2);
							objby[i] = 360 + 33*(i-10)*Math.sin(Math.PI*t/94 + Math.PI/2);
						}
						for (let i=21; i<=30; i++){
							objbx[i] = 360 + 33*(i-20)*Math.cos(Math.PI*t/94 + Math.PI);
							objby[i] = 360 + 33*(i-20)*Math.sin(Math.PI*t/94 + Math.PI);
						}
						for (let i=31; i<=40; i++){
							objbx[i] = 360 + 33*(i-30)*Math.cos(Math.PI*t/94 + 3*Math.PI/2);
							objby[i] = 360 + 33*(i-30)*Math.sin(Math.PI*t/94 + 3*Math.PI/2);
						}
					}
					else if (t>=188){
						for (let i=1; i<=10; i++){
							objbx[i] = 360 + 33*i*Math.cos((-1)*Math.PI*(t-188)/94);
							objby[i] = 360 + 33*i*Math.sin((-1)*Math.PI*(t-188)/94);
						}
						for (let i=11; i<=20; i++){
							objbx[i] = 360 + 33*(i-10)*Math.cos((-1)*Math.PI*(t-188)/94 + Math.PI/2);
							objby[i] = 360 + 33*(i-10)*Math.sin((-1)*Math.PI*(t-188)/94 + Math.PI/2);
						}
						for (let i=21; i<=30; i++){
							objbx[i] = 360 + 33*(i-20)*Math.cos((-1)*Math.PI*(t-188)/94 + Math.PI);
							objby[i] = 360 + 33*(i-20)*Math.sin((-1)*Math.PI*(t-188)/94 + Math.PI);
						}
						for (let i=31; i<=40; i++){
							objbx[i] = 360 + 33*(i-30)*Math.cos((-1)*Math.PI*(t-188)/94 + 3*Math.PI/2);
							objby[i] = 360 + 33*(i-30)*Math.sin((-1)*Math.PI*(t-188)/94 + 3*Math.PI/2);
						}
					}
				}
				else if (gamestate==24){
					if (t==5148){t=0;}
					if(t%66<33){
						for (let i=0; i<=9; i++){objby[i]-=10;}
						for(let i=10; i<=19; i++){objby[i]+=10;}
					}
					else if(t%66>=33){
						for (let i=0; i<=9; i++){objby[i]+=10;}
						for(let i=10; i<=19; i++){objby[i]-=10;}
					}
					if(t%468<234){
						for (let i=20; i<=22; i++){objbx[i]+=5;}
						for(let i=23; i<=25; i++){objbx[i]-=5;}
					}
					else if(t%468>=234){
						for (let i=20; i<=22; i++){objbx[i]-=5;}
						for(let i=23; i<=25; i++){objbx[i]+=5;}
					}
				}				
				else if (gamestate==25){
					if(t==72){t=0;}
					for(let i=41; i<=43; i++){
						objbx[i] = 180 + 40*(i-40)*Math.cos((-1)*Math.PI*t/36);
						objby[i] = 540 + 40*(i-40)*Math.sin((-1)*Math.PI*t/36);
					}
					for(let i=44; i<=46; i++){
						objbx[i] = 180 + 40*(i-43)*Math.cos((-1)*Math.PI*t/36 + Math.PI);
						objby[i] = 540 + 40*(i-43)*Math.sin((-1)*Math.PI*t/36 + Math.PI);
					}
					if(t%36<18){
						for(let i=0; i<=9; i++){objbx[i]-=5;}
						for(let i=10; i<=39; i++){objby[i]-=5;}
					}
					else if(t%36>=18){
						for(let i=0; i<=9; i++){objbx[i]+=5;}
						for(let i=10; i<=39; i++){objby[i]+=5;}
					}
				}
				else if (gamestate==26){
					if(t==30){t=0;}
					if (t<15){
						for(let i=0; i<=12; i++){objby[i]+=10;}
						for(let i=13; i<=25; i++){objby[i]-=10;}
					}
					else if (t>=15){
						for(let i=0; i<=12; i++){objby[i]-=10;}
						for(let i=13; i<=25; i++){objby[i]+=10;}
					}
				}
				else if (gamestate == 27){
					if (t==2520){t=0;}
					if(t%84<42){
						for (let i=0; i<=5; i++){objby[i]-=5;}
						for (let i=6; i<=11; i++){objby[i]+=5;}
					}
					else if(t%84>=42){
						for (let i=0; i<=5; i++){objby[i]+=5;}
						for (let i=6; i<=11; i++){objby[i]-=5;}
					}
					if(t%180<90){
						for (let i=12; i<=23; i++){objby[i]-=5;}
						for (let i=24; i<=29; i++){objby[i]+=5;}
					}
					else if(t%180>=90){
						for (let i=12; i<=23; i++){objby[i]+=5;}
						for (let i=24; i<=29; i++){objby[i]-=5;}
					}
					if(t%120<60){
						for (let i=30; i<=35; i++){objby[i]-=2.5;}
						for (let i=36; i<=65; i++){objby[i]+=2.5;}
					}
					else if(t%120>=60){
						for (let i=30; i<=35; i++){objby[i]+=2.5;}
						for (let i=36; i<=65; i++){objby[i]-=2.5;}
					}
				}
				else if (gamestate == 28){
					if (t==108){t=0;}
					if(t<54){
						for(let i=0; i<=14; i++){objby[i]-=5;}
						for (let i=15; i<=29; i++){objby[i]+=5;}
						for (let i=30; i<=41; i++){objbx[i]-=5;}
						for (let i=42; i<=53; i++){objbx[i]+=5;}
					}
					if(t>=54){
						for(let i=0; i<=14; i++){objby[i]+=5;}
						for (let i=15; i<=29; i++){objby[i]-=5;}
						for (let i=30; i<=41; i++){objbx[i]+=5;}
						for (let i=42; i<=53; i++){objbx[i]-=5;}
					}
				}
				else if (gamestate==29){
					if(t==4836){t=0;}
					if(t%156<78){
						for(let i=0; i<=7; i++){objby[i]-=5;}
						for(let i=8; i<=15; i++){objby[i]+=5;}
					}
					else if(t%156>=78){
						for(let i=0; i<=7; i++){objby[i]+=5;}
						for(let i=8; i<=15; i++){objby[i]-=5;}
					}
					if(t%372<186){
						for(let i=16; i<=19; i++){objbx[i]-=5;}
						for(let i=20; i<=22; i++){objbx[i]+=5;}
					}
					else if(t%372>=186){
						for(let i=16; i<=19; i++){objbx[i]+=5;}
						for(let i=20; i<=22; i++){objbx[i]-=5;}
					}
				}
				else if (gamestate==30){
					if (t==266760){t=0;}
					if (t%456<228){
						for (let i=0; i<=9; i++){objby[i]-=2.5;}
						for (let i=10; i<=19; i++){objby[i]+=2.5;}
					}
					else if (t%456>=228){
						for (let i=0; i<=9; i++){objby[i]+=2.5;}
						for (let i=10; i<=19; i++){objby[i]-=2.5;}
					}
					if (t%120<60){
						for (let i=20; i<=24; i++){objbx[i]+=10;}
					}
					else if (t%120>=60){
						for (let i=20; i<=24; i++){objbx[i]-=10;}
					}
					if (t%216<24){
						for(let i=25; i<=29; i++){objby[i]+=10;}
						for(let i=30; i<=34; i++){objby[i]-=10;}
					}
					else if (t%216>=24 && t%216<108){
						for(let i=25; i<=29; i++){objbx[i]-=10;}
						for(let i=30; i<=34; i++){objbx[i]+=10;}
					}
					else if (t%216>=108 && t%216<132){
						for(let i=25; i<=29; i++){objby[i]-=10;}
						for(let i=30; i<=34; i++){objby[i]+=10;}
					}
					else if (t%216>=132){
						for(let i=25; i<=29; i++){objbx[i]+=10;}
						for(let i=30; i<=34; i++){objbx[i]-=10;}
					}
					if (t%312<24){
						for(let i=35; i<=39; i++){objby[i]+=10;}
						for(let i=40; i<=44; i++){objby[i]-=10;}
					}
					else if (t%312>=24 && t%312<156){
						for(let i=35; i<=39; i++){objbx[i]-=10;}
						for(let i=40; i<=44; i++){objbx[i]+=10;}
					}
					else if (t%312>=156 && t%312<180){
						for(let i=35; i<=39; i++){objby[i]-=10;}
						for(let i=40; i<=44; i++){objby[i]+=10;}
					}
					else if (t%312>=180){
						for(let i=35; i<=39; i++){objbx[i]+=10;}
						for(let i=40; i<=44; i++){objbx[i]-=10;}
					}
				}
		
				// player movement controls
				// player move by 4 wall units / s = 250 u/s = 5 / frame
				// 1 wall unit = 60u
				// blue circle radius = 15u
				// yellow circle radius = 10u
				draw.fillStyle = "#FF00C8";
				draw.fillRect(0,3*h/4+50,w,h/4);
				if (a1==1){posa -= Math.PI/50;}
				if (a3==1){posa += Math.PI/50;}
				if (posa<0){posa += 2*Math.PI;}
				else if (posa>2*Math.PI){posa -= 2*Math.PI;}
				draw.fillStyle = "#00C8FF";
				draw.font = "30px Arial";
				if (a2 == 1){
					posfx = posx + 5*Math.cos(posa);
					posfy = posy + 5*Math.sin(posa);
					canmove = 0;
					for (let i=0; i<objax.length; i++){
						if (posfx-objax[i]<=30 && posfx-objax[i]>=-30 && posfy-objay[i]<=30 && posfy-objay[i]>=-30){canmove=1;}
					}
					if (canmove==0){
						posx = posfx;
						posy = posfy;
					}
				}
				coord = "your position is (" + Math.floor(posx) + ", " + Math.floor(posy) + "), you are facing direction " + Math.floor(posa/Math.PI*180);
				draw.fillText(coord,w/2,3*h/4+75);
				draw.fillText("You still need to collect " + objcx.length + " yellow circles",w/2,3*h/4+105);
				draw.fillText("You are on level " + gamestate,w/2,3*h/4+135);

				// collision detectors
				for (let i=0; i<objbx.length; i++){
						if ((posx-objbx[i])*(posx-objbx[i])+(posy-objby[i])*(posy-objby[i])<=225){gamelost=1;}
				}
				for (let i=0; i<objcx.length; i++){
					if ((posx-objcx[i])*(posx-objcx[i])+(posy-objcy[i])*(posy-objcy[i])<=100){
						objcx.splice(i,1);
						objcy.splice(i,1);
					}
				}

				// bug in display: close objects appear larger than they should

				//initialise display
				draw.fillStyle = "#000000";
				draw.fillRect(0,0,w,h/2);
				arrdisplay = [];

				// display wall segments
				for (let i=0; i<objax.length; i++){
					dist = ((posx - objax[i])*(posx - objax[i]) + (posy - objay[i])*(posy - objay[i]))**0.5 - 30;
					if (dist > 255){continue;}
					angle = Math.atan2(objay[i]-posy, objax[i]-posx);
					arrdisplay.push(new triple(dist,angle,1));
				}

				// display blue circles
				for (let i=0; i<objbx.length; i++){
					dist = ((posx - objbx[i])*(posx - objbx[i]) + (posy - objby[i])*(posy - objby[i]))**0.5 - 15;
					if (dist > 255){continue;}
					angle = Math.atan2(objby[i]-posy, objbx[i]-posx);
					arrdisplay.push(new triple(dist,angle,2));
				}

				//display yellow circles
				for (let i=0; i<objcx.length; i++){
					dist = ((posx - objcx[i])*(posx - objcx[i]) + (posy - objcy[i])*(posy - objcy[i]))**0.5 - 10;
					if (dist > 255){continue;}
					angle = Math.atan2(objcy[i]-posy, objcx[i]-posx);
					arrdisplay.push(new triple(dist,angle,3));
				}

				//sort arrdisplay array in display order
				arrdisplay.sort((a,b) => {
					if(a.x < b.x){return 1;}
					else if (a.x > b.x){return -1;}
					else if (a.x == b.x){return 0;}
				});

				//actually display
				for(let i=0; i<arrdisplay.length; i++){
					if (arrdisplay[i].z==1){
						//displaying a wall
						colr = 255 - Math.floor(arrdisplay[i].x);
						colg = 0;
						colb = 200 - Math.floor(arrdisplay[i].x);
						col = "rgb(" + colr + "," + colg + "," + colb +")"
						draw.fillStyle = col;
						arad = Math.asin(30/(30+arrdisplay[i].x));
						objangle = arrdisplay[i].y - posa - arad; 
						if(objangle < (-1)*Math.PI){objangle += 2*Math.PI;}
						else if (objangle > Math.PI){objangle -= 2*Math.PI;}
						draw.fillRect(w/2 + objangle/Math.PI*2*w, 0,arad/Math.PI*4*w, h/2);
					}

					else if (arrdisplay[i].z==2){
						//displaying a blue circle
						colr = 0;
						colg = 200 - Math.floor(arrdisplay[i].x);
						colb = 255 - Math.floor(arrdisplay[i].x);
						col = "rgb(" + colr + "," + colg + "," + colb +")";
						draw.fillStyle = col;
						arad = Math.asin(15/(15+arrdisplay[i].x));
						objangle = arrdisplay[i].y - posa - arad;
						if(objangle < (-1)*Math.PI){objangle += 2*Math.PI;}
						else if (objangle > Math.PI){objangle -= 2*Math.PI;}
						draw.fillRect(w/2 + objangle/Math.PI*2*w, 0,arad/Math.PI*4*w, h/2);
					}

					else if (arrdisplay[i].z==3){
						//displaying a yellow circle
						colr = 255 - Math.floor(arrdisplay[i].x);
						colg = 255 - Math.floor(arrdisplay[i].x);
						colb = 0;
						col = "rgb(" + colr + "," + colg + "," + colb +")"
						draw.fillStyle = col;
						arad = Math.asin(10/(10+arrdisplay[i].x));
						objangle = arrdisplay[i].y - posa - arad;
						if(objangle < (-1)*Math.PI){objangle += 2*Math.PI;}
						else if (objangle > Math.PI){objangle -= 2*Math.PI;}
						draw.fillRect(w/2 + objangle/Math.PI*2*w, 0,arad/Math.PI*4*w, h/2);
					}

				}

				//check if level passed
				if (objcx.length==0){wingame();}
				if (gamelost==1){losegame();}
			}

			function wingame(){
				clearInterval(fps);
				
				//next level (increase game state by 1)
				gamestate++;

				// initialise ALL variables
				a1 = 0;
				a2 = 0;
				a3 = 0;
				arrdisplay = [];
				posa = 0;
				t = 0;
				gamelost = 0;
				objax = [];
				objay = [];
				objbx = [];
				objby = [];
				objcx = [];
				objcy = [];
				posx = 0;
				posy = 0;

				if(gamestate == 0){
					objax = [30,90,150,210,270,270,270,270,270,210,150,90,30,30,30,30];
					objay = [30,30,30,30,30,90,150,210,270,270,270,270,270,210,150,90];
					objbx = [150];
					objby = [75];
					objcx = [210,210,210];
					objcy = [90,150,210];
					posx = 90;
					posy = 90;
				}
				else if (gamestate == 1){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1170,1170,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,30,30,270,270,270,270,270,390,810,930,930,930,930,930];
					objay = [30,30,30,30,30,90,90,90,90,90,90,90,90,30,30,30,30,30,30,30,90,150,210,270,330,390,450,450,450,450,450,390,390,390,390,390,390,390,390,450,450,450,450,450,450,450,390,330,270,210,150,90,90,150,210,270,330,390,90,150,210,270,330,390];
					objbx = [315,315,885,885]; 
					objby = [210,330,150,270];
					objcx = [1110];
					objcy = [390];
					posx = 90;
					posy = 90;
				}
				else if (gamestate==2){
					objax = [30,90,150,210,210,210,270,330,390,450,510,570,630,690,750,810,870,930,990,990,990,1050,1110,1170,1170,1170,1170,1110,1050,990,990,990,930,870,810,750,690,630,570,510,450,390,330,270,210,210,210,150,90,30,30,30];
					objay = [150,150,150,150,90,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,150,150,150,210,270,330,330,330,330,390,450,450,450,450,450,450,450,450,450,450,450,450,450,450,390,330,330,330,330,270,210];
					objbx = [270,390,510,630,750,870,330,450,570,690,810,930];
					objby = [75,75,75,75,75,75,405,405,405,405,405,405];
					objcx = [600,1040];
					objcy = [240,240];
					posx = 90;
					posy = 210;
				}
				else if (gamestate == 3){
					objax = [30,90,150,150,210,270,330,330,330,330,330,330,330,270,210,210,150,90,30,30,30,30,30,30];
					objay = [30,30,30,90,90,90,90,150,210,270,330,390,450,450,450,390,390,390,390,330,270,210,150,90];
					objbx = [150,210,270,270,270,270,210,150,90,90,90];
					objby = [150,150,150,210,270,330,330,330,330,270,210];
					objcx = [180,270];
					objcy = [240,390];
					posx = 90;
					posy = 90;
				}
				else if(gamestate==4){
					objax = [30,90,150,210,210,270,270,330,330,390,390,390,390,450,510,570,570,570,570,630,630,690,690,750,750,750,750,750,750,690,690,630,630,570,510,450,390,330,330,270,270,210,210,150,90,30,30,30];
					objay = [390,390,390,390,330,330,270,270,210,210,150,90,30,30,30,30,90,150,210,210,270,270,330,330,390,450,510,570,630,630,690,690,750,750,750,750,750,750,690,690,630,630,570,570,570,570,510,450];
					objbx = [480,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objby = [480,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objcx = [480,660,480,120];
					objcy = [300,480,660,480];
					posx = 480;
					posy = 120;
				}
				else if (gamestate == 5){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1110,1110,1050,1050,1050,1050,1050,1050,1050,1050,1050,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,150,150,150,150,150,90,30,30,30,30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,930,930,930,930,930,930,930,870,810,750,690,630,570,510,450,390,330,270,270,270,270,270,270,330,390,450,510,570,630,690,750,810,810,810,810,750,690,630,570,510,450,390,390];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,150,210,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,270,270,210,150,90,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,210,270,330,390,450,510,570,570,570,570,570,570,570,570,570,570,570,570,510,450,390,330,270,270,270,270,270,270,270,270,270,270,330,390,450,450,450,450,450,450,450,450,390];
					objbx = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objby = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objcx = [1050,90,750];
					objcy = [90,210,360];
					posx = 90;
					posy = 90;
				}
				else if (gamestate == 6){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1170,1170,1170,1170,1170,1170,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,90,150,150,150,210,270,330,390,450,510,570,630,690,750,810,870,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,90,30,30,30];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,510,510,450,390,390,390,390,390,390,390,390,390,390,390,390,390,330,330,330,330,330,330,330,330,330,330,330,330,330,270,210,210,210,150,90];
					objbx = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objby = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objcx = [1020,930,690,450,210,120];
					objcy = [360,450,450,450,450,600];
					posx = 90;
					posy = 90;
				}
				else if (gamestate==7){
					objax = [30,90,150,210,210,210,210,270,330,390,450,510,570,630,690,750,810,870,930,990,990,990,990,1050,1110,1170,1170,1170,1170,1110,1050,990,990,990,990,930,870,810,750,690,630,570,510,450,390,330,270,210,210,210,210,150,90,30,30,30];
					objay = [210,210,210,210,150,90,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,210,210,210,270,330,390,390,390,390,450,510,570,570,570,570,570,570,570,570,570,570,570,570,570,570,510,450,390,390,390,390,330,270];
					objbx = [270,390,510,630,750,870,330,450,570,690,810,930];
					objby = [75,75,75,75,75,75,525,525,525,525,525,525];
					objcx = [270,930,270,930,1080];
					objcy = [90,90,510,510,300];
					posx = 90;
					posy = 270;
				}
				else if (gamestate==8){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,690,690,690,690,750,810,810,810,810,750,690,690,690,690,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,30,30,30,30,30,30,210,150,210,150,210,150,210,150,210,150,210,330,390,330,330,330,330,330,330,390,390,390,390,390,390,330,390,510,570,510,570,510,570,510,570,510,570,510,570];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,270,270,330,390,450,450,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,210,150,90,150,210,210,330,330,390,390,510,510,570,570,90,90,210,270,330,390,450,510,210,270,330,390,450,510,630,630,150,150,210,210,330,330,390,390,510,510,570,570];
					objbx = [90,90,90,630,630,630,270];
					objby = [90,270,450,90,270,450,150];
					objcx = [630,90,630,720];
					objcy = [90,630,630,360];
					posx = 150;
					posy = 150;
				}
				else if (gamestate == 9){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1170,1170,1170,1170,1170,1170,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,30,30,30,30,30,30,210,270,210,270,210,210,210,210,270,330,390,450,450,450,510,510,510,510,450,390,330,270,270,270,450,510,570,630,690,750,450,510,570,630,690,750,690,690,690,690,690,690,750,750,750,750,750,750,930,930,930,930,930,930,990,1050,1110,990,990,990,990,990,1050,1110];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,210,150,90,90,90,150,150,510,450,390,330,330,330,330,330,270,210,210,270,330,390,390,390,390,390,450,510,570,570,570,570,570,570,630,630,630,630,630,630,90,150,210,270,330,390,90,150,210,270,330,390,210,270,330,390,450,510,510,510,510,210,270,330,390,450,450,450];
					objbx = [150,90,240,330,420,510,240,330,480,570,810,810,870,960,1050,90,90,330,330,570,810,810,1050,630,870];
					objby = [360,480,570,480,450,510,210,120,150,240,600,360,240,150,240,210,570,570,210,90,450,90,90,240,570];
					objcx = [600,1080,1080];
					objcy = [480,360,600];
					posx = 90;
					posy = 90;
				}
				else if (gamestate==10){
					objax = [150,210,270,330,390,450,510,570,630,630,630,630,570,510,510,510,510,570,630,630,630,630,630,570,510,510,450,390,330,270,210,150,150,90,30,30,30,30,30,90,150,150,150,150,150,150,390,390,270,330,390,330,330,330,330,210,270,330,390,450];
					objay = [30,30,30,30,30,30,30,30,30,90,150,210,210,210,270,330,390,390,390,450,510,570,630,630,630,690,690,690,690,690,690,690,630,630,630,570,510,450,390,390,390,330,270,210,150,90,90,150,210,210,210,270,330,390,450,510,510,510,510,510];
					objbx = [285,285,165,585,585,465,465,195,195,75,75,495,375,375,210,330,450,270,390];
					objby = [270,390,510,570,450,450,330,330,450,450,570,510,390,270,555,555,555,645,645];
					objcx = [540];
					objcy = [120];
					posx = 330;
					posy = 90;
				}
				else if (gamestate==11){
					objax = [30,90,150,210,210,210,210,270,270,270,270,270,270,270,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1050,1050,1050,1050,1050,990,930,870,870,870,870,810,810,810,810,810,810,810,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30];
					objay = [270,270,270,270,330,390,450,450,390,330,270,210,150,90,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,330,330,330,270,210,150,150,210,270,330,390,450,510,570,570,570,570,570,570,570,570,570,570,570,570,570,570,510,450,390,330];
					objbx = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objby = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objcx = [120,330,750];
					objcy = [360,90,510];
					posx = 990;
					posy = 270;
				}
				else if (gamestate == 12){
					objax = [];
					objay = [];
					objbx = [0,30,60,90,120,150,180,210,240,270,300,330,360,390,420,450,480,510,540,570,600,600,600,600,600,600,600,600,600,630,660,690,720,750,780,810,840,870,900,930,960,990,990,990,990,990,990,960,930,900,870,840,810,780,750,720,690,660,630,600,570,540,510,480,450,420,390,360,330,300,270,240,210,180,150,120,90,60,30,0,0,0,0,0,0,0,0,0,0,0,0,0,390,420,150,150,180,210,660,690,720,750,780,810,840,750,780,450,480,510,540,570,600,630,660,540,570,30,60,90,120,150,180,210,240,30,60,90,120,150,180,210,240,270,300,330,360,390,420,450,480,510,270,300,330,360,390,420,450,330,360,450,480,510,450,480,510,510,480,450,420,390,360,330,510,480,450,420,390,360,330,300,270,240,210,180,150,150,180,210,240,270,300,510,210,240,390,420,540,570,750,780];
					objby = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30,60,90,120,150,180,210,240,240,240,240,240,240,240,240,240,240,240,240,240,240,270,300,330,360,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,360,330,300,270,240,210,180,150,120,90,60,30,30,30,330,360,360,360,270,270,270,270,270,270,270,300,300,360,360,360,360,360,360,360,360,330,330,210,210,210,210,210,210,210,210,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,270,270,270,270,270,270,270,300,300,210,210,210,180,180,180,150,150,150,150,150,150,150,120,120,120,120,120,120,120,120,120,120,120,120,120,90,90,90,90,90,90,90,0,0,390,390,0,0,390,390];
					objcx = [75,75,405];
					objcy = [75,315,195];
					posx = 915;
					posy = 315;
				}
				else if (gamestate == 13){
					objax = [270,330,390,450,450,450,510,570,630,690,690,690,690,690,690,690,690,630,570,510,450,450,450,390,330,270,270,270,210,150,90,30,30,30,30,30,30,30,30,90,150,210,270,270];
					objay = [30,30,30,30,90,150,150,150,150,150,210,270,330,390,450,510,570,570,570,570,570,630,690,690,690,690,630,570,570,570,570,570,510,450,390,330,270,210,150,150,150,150,150,90];
					objbx = [90,210,330,450,570,690,150,270,390,510,630,750,75,765];
					objby = [195,195,195,195,195,195,525,525,525,525,525,525,330,390];
					objcx = [360];
					objcy = [120];
					posx = 330;
					posy = 630;
				}
				else if (gamestate==14){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,930,930,930,990,1050,1110,1170,1170,1170,1170,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30];
					objay = [210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,150,90,30,30,30,30,30,90,150,210,270,330,390,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,390,330,270];
					objbx = [450,450,690,690,930,930,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objby = [375,405,285,315,375,405];
					objcx = [1050];
					objcy = [150];
					posx = 150;
					posy = 330;
				}
				else if (gamestate == 15){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1230,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1230,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,30,30,30,30,30,30,150,210,270,270,270,270,270,270,270,510,510,510,510,510,510,510,750,750,750,750,750,750,750,990,990,990,990,990,990,990,1050,1050,1050,1050,1050,1050,1050,1110,1170];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,210,150,90,210,210,90,150,210,270,330,390,450,270,330,390,450,510,570,630,90,150,210,270,330,390,450,270,330,390,450,510,570,630,270,330,390,450,510,570,630,510,510];
					objbx = [270,510,750,990,1050,150,1110,1230,90,210,1170,330,450,570,690,810,930,390,630,870];
					objby = [495,75,495,75,225,255,75,75,645,645,465,75,75,75,75,75,75,645,645,645];
					objcx = [1110];
					objcy = [570];
					posx = 210;
					posy = 150;
				}
				else if (gamestate==16){
					objax = [30,90,150,150,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1170,1230,1290,1290,1290,1290,1230,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,90,30,30,30,450,450,450,450,510,510,510,510,810,810,810,810,870,870,870,870];
					objay = [150,150,150,90,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,150,150,210,270,330,330,330,390,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,390,330,330,330,270,210,90,150,210,270,90,150,210,270,210,270,330,390,210,270,330,390];
					objbx = [210,210,210,330,330,330,450,570,570,570,690,690,690,810,930,930,930,1050,1050,1050];
					objby = [90,210,330,90,210,330,330,90,210,330,90,210,330,90,90,210,330,90,210,330];
					objcx = [390,570,750,930,1200];
					objcy = [90,90,390,390,240];
					posx = 90;
					posy = 210;
				}
				else if (gamestate == 17){
					objax = [150,210,270,270,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1050,1050,990,930,930,930,930,930,930,930,930,930,930,870,810,810,810,750,690,630,570,510,510,510,450,390,390,390,330,270,210,150,90,30,30,30,90,150,150,150,150,150,150,150,90,90,90,150,270,270,270,270,270,270,330,390,330,390,330,390,330,390,510,570,630,690,750,810,510,570,630,690,750,810,510,570,630,690,750,810,510,570,630,690,750,810];
					objay = [30,30,30,90,150,150,150,150,150,150,150,150,150,150,150,150,150,150,210,270,270,270,330,390,450,510,570,630,690,750,810,810,810,750,690,690,690,690,690,690,750,810,810,810,750,690,690,690,690,690,690,690,630,570,570,570,510,450,390,330,270,210,210,150,90,90,270,330,390,450,510,570,270,270,390,390,450,450,570,570,270,270,270,270,270,270,390,390,390,390,390,390,450,450,450,450,450,450,570,570,570,570,570,570];
					objbx = [210,90,870,990,450,330,330,270,450,810,450,450];
					objby = [90,630,750,210,750,510,330,210,270,510,570,690];
					objcx = [750];
					objcy = [510];
					posx = 150;
					posy = 150;
				}
				else if (gamestate==18){
					objax = [30,90,150,150,210,270,330,390,450,510,570,630,690,750,810,810,870,930,930,930,930,870,810,810,750,690,630,570,510,450,390,330,270,210,150,150,90,30,30,30];
					objay = [90,90,90,30,30,30,30,30,30,30,30,30,30,30,30,90,90,90,150,210,270,270,270,330,330,330,330,330,330,330,330,330,330,330,330,270,270,270,210,150];
					objbx = [210,330,450,570,690,270,390,510,630,750];
					objby = [75,75,75,75,75,75,285,285,285,285,285,285];
					objcx = [210,270,330,390,450,510,570,630,690,750,210,270,330,390,450,510,570,630,690,750,210,270,330,390,450,510,570,630,690,750,210,270,330,390,450,510,570,630,690,750,240,300,360,420,480,540,600,660,720,240,300,360,420,480,540,600,660,720,240,300,360,420,480,540,600,660,720,840];
					objcy = [90,90,90,90,90,90,90,90,90,90,150,150,150,150,150,150,150,150,150,150,210,210,210,210,210,210,210,210,210,210,270,270,270,270,270,270,270,270,270,270,120,120,120,120,120,120,120,120,120,180,180,180,180,180,180,180,180,180,240,240,240,240,240,240,240,240,240,180];
					posx = 90;
					posy = 150;
				}
				else if (gamestate==19){
					objax = [30,90,150,150,210,270,330,390,450,510,570,630,690,750,810,870,930,930,990,1050,1050,1050,1050,1050,1050,990,930,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,90,30,30,30,30,30];
					objay = [90,90,90,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,90,90,150,210,270,330,390,390,390,450,450,450,450,450,450,450,450,450,450,450,450,450,450,390,390,390,330,270,210,150];
					objbx = [210,330,450,570,690,810,270,390,510,630,750,870];
					objby = [405,405,405,405,405,405,75,75,75,75,75,75];
					objcx = [960];
					objcy = [240];
					posx = 90;
					posy = 150;
				}
				else if (gamestate==20){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1230,1230,1230,1230,1230,1230,1230,1290,1290,1290,1290,1230,1170,1110,1110,1050,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,270,270,270,270,270,210,150,90,30,30,30,390,390,390,390,390,510,510,570,510,510,570,690,750,690,750,690,690,750,870,870,930,870,870,930,1050,1110,1050,1110,1050,1050,1110];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,390,390,450,510,570,570,570,570,510,510,450,450,450,450,450,450,450,450,450,450,450,450,450,450,390,330,270,210,150,210,210,210,210,150,90,90,150,210,270,330,150,210,210,330,390,390,90,90,150,150,270,330,330,150,210,210,330,390,390,90,90,150,150,270,330,330];
					objbx = [450,450,630,630,810,810,990,990,450,630,810,990,1170];
					objby = [90,270,210,390,90,270,210,390,390,390,390,390,390];
					objcx = [120,570,570,750,930,930,1110,1170];
					objcy = [120,150,330,270,150,330,270,90];
					posx = 1230;
					posy = 510;
				}
				else if (gamestate == 21){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1050,1050,1050,1050,1050,1050,1110,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,150,150,150,150,90,30,30,30];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,390,390,390,450,510,570,570,570,570,570,570,570,570,570,570,570,570,570,570,570,570,570,570,510,450,390,330,270,210,210,210,150,90];
					objbx = [210,390,570,750,930,270,450,630,810,990,330,510,690,870];
					objby = [75,75,75,75,75,75,75,75,75,75,75,75,75,75];
					objcx = [210,600,990,1080];
					objcy = [510,300,90,480];
					posx = 90;
					posy = 90;
				}
				else if (gamestate==22){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1170,1170,1110,1050,990,930,870,810,810,870,930,990,1050,1050,1050,1050,1050,1050,1050,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,30,30,30,30,30,30,210,210,210,210,210,210,270,270,270,270,270,270,330,330,330,330,330,330,330,330,390,390,390,390,390,390,390,390,570,570,570,570,570,570,570,570,630,630,630,630,630,630,630,630,690,750,810,870,690,750,810,870];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,210,210,210,210,210,210,270,270,270,270,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,210,150,90,210,270,330,390,450,510,210,270,330,390,450,510,210,270,330,390,450,510,570,630,210,270,330,390,450,510,570,630,90,150,210,270,330,390,450,510,90,150,210,270,330,390,450,510,450,450,450,450,510,510,510,510];
					objbx = [690,990,690,750,690,990,930,990,690,990,570,630,450,510,450,510,210,510,90,150,90,150,90,150];
					objby = [90,150,210,270,330,390,450,510,570,630,570,630,330,630,210,270,90,150,90,150,210,510,570,630];
					objcx = [240];
					objcy = [600];
					posx = 1110;
					posy = 90;
				}
				else if (gamestate==23){
					objax = [30,90,150,210,270,330,390,450,510,570,570,630,630,690,690,690,690,690,690,690,690,630,630,570,570,510,450,390,330,270,210,150,150,90,90,30,30,30,30,30,30,30,30,30];
					objay = [30,30,30,30,30,30,30,30,30,30,90,90,150,150,210,270,330,390,450,510,570,570,630,630,690,690,690,690,690,690,690,690,630,630,570,570,510,450,390,330,270,210,150,90];
					objbx = [360,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objby = [360,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
					objcx = [570,330,390,270,330,390,450,210,270,330,390,450,510,150,210,270,450,510,570,150,210,270,450,510,570,210,270,330,390,450,510,270,330,390,450,330,390];
					objcy = [570,150,150,210,210,210,210,270,270,270,270,270,270,330,330,330,330,330,330,390,390,390,390,390,390,450,450,450,450,450,450,510,510,510,510,570,570];
					posx = 90;
					posy = 90;
				}
				else if (gamestate==24){
					objax = [30,90,150,210,270,330,390,390,390,450,510,570,570,570,630,690,750,810,870,930,990,1050,1110,1110,1110,1170,1230,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1230,1170,1110,1050,990,930,930,930,870,810,750,750,750,690,630,570,510,450,390,330,270,210,210,210,150,90,30,30,30,30,30,30,30,30,30];
					objay = [150,150,150,150,150,150,150,90,30,30,30,30,90,150,150,150,150,150,150,150,150,150,150,90,30,30,30,30,90,150,210,270,330,390,450,510,570,570,570,570,570,570,570,630,690,690,690,690,630,570,570,570,570,570,570,570,570,570,570,630,690,690,690,690,630,570,510,450,390,330,270,210];
					objbx = [90,210,330,450,570,690,810,930,1050,1170,150,270,390,510,630,750,870,990,1110,1230,75,75,75,1245,1245,1245];
					objby = [525,525,525,525,525,525,525,525,525,525,195,195,195,195,195,195,195,195,195,195,210,330,450,270,390,510];
					objcx = [1200];
					objcy = [120];
					posx = 90;
					posy = 630;
				}
				else if (gamestate==25){
					objax = [90,150,210,270,270,270,330,330,330,330,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1230,1290,1290,1290,1290,1230,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,30,30,30,30,30,90,90];
					objay = [30,30,30,30,90,150,150,210,270,330,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,450,450,450,510,570,630,630,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,210,150,150,90];
					objbx = [165,165,165,165,165,285,285,285,285,285,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,180,0,0,0,0,0,0];
					objby = [210,270,330,390,450,210,270,330,390,450,525,525,525,525,525,525,525,525,525,525,525,525,525,525,525,645,645,645,645,645,645,645,645,645,645,645,645,645,645,645,540,0,0,0,0,0,0];
					objcx = [1200];
					objcy = [540];
					posx = 150;
					posy =  90;
				}
				else if (gamestate==26){
					objax = [150,210,270,330,330,390,390,450,450,510,510,570,570,630,630,690,690,750,750,810,810,870,870,930,930,990,990,1050,1110,1170,1170,1170,1170,1110,1110,1050,1050,990,990,930,930,870,990,1050,1110,1170,1230,1290,1290,1290,1290,1290,1230,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,30,90,150,210,270,330,390,450,390,330,330,270,270,210,210,150,150,150];
					objay = [30,30,30,30,90,90,150,150,210,210,270,270,330,330,390,390,330,330,270,270,210,210,150,150,90,90,30,30,30,30,90,150,210,210,270,270,330,330,390,390,450,450,450,450,450,450,450,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,450,450,450,450,450,450,450,390,390,330,330,270,270,210,210,150,90];
					objbx = [330,450,570,810,930,90,210,330,450,810,930,1050,1170,390,510,750,870,990,150,270,390,510,870,990,1110,1230];
					objby = [135,255,375,315,195,495,495,495,495,495,495,495,495,345,465,525,405,285,645,645,645,645,645,645,645,645];
					objcx = [90,240,660,1080,1230];
					objcy = [570,120,480,120,570];
					posx = 660;
					posy = 600;
				}
				else if (gamestate==27){
					objax = [150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1170,1170,1170,1170,1230,1290,1290,1290,1290,1230,1170,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,90,30,30,30,30,90,150,150,90,30,30,30,30,90,150,150];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,270,270,330,390,450,450,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,570,570,510,450,390,390,390,330,330,330,270,210,150,150,150,90];
					objbx = [330,330,330,690,690,690,630,630,630,930,930,930,270,270,270,510,510,510,810,810,810,1050,1050,1050,570,570,570,990,990,990,210,210,210,210,210,210,390,390,390,390,390,390,450,450,450,450,450,450,750,750,750,750,750,750,870,870,870,870,870,870,1110,1110,1110,1110,1110,1110];
					objby = [285,465,645,285,465,645,75,255,435,75,255,435,525,585,645,525,585,645,525,585,645,525,585,645,75,135,195,75,135,195,225,285,345,525,585,645,75,135,195,375,435,495,75,135,195,375,435,495,75,135,195,375,435,495,75,135,195,375,435,495,75,135,195,375,435,495];
					objcx = [120,1200];
					objcy = [240,360];
					posx = 90;
					posy = 450;
				}
				else if (gamestate == 28){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1110,1110,1110,1170,1170,1170,1170,1170,1170,1170,1170,1110,1110,1110,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,90,30,30,30,30,90,150,150,150,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,150,90,30,30,30];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,210,270,330,390,450,510,570,630,630,690,750,810,810,810,810,810,810,810,810,810,810,810,810,810,810,810,810,810,810,810,750,690,630,630,630,570,510,450,450,450,450,450,450,450,450,450,450,450,450,450,450,450,390,390,390,390,390,390,390,390,390,390,390,390,390,390,390,330,270,210,210,210,150,90];
					objbx = [210,330,450,570,690,810,930,1050,270,390,510,630,750,870,990,270,390,510,630,750,870,990,210,330,450,570,690,810,930,1050,465,465,465,465,765,765,765,765,1065,1065,1065,1065,195,195,195,195,495,495,495,495,795,795,795,795];
					objby = [345,345,345,345,345,345,345,345,765,765,765,765,765,765,765,75,75,75,75,75,75,75,495,495,495,495,495,495,495,495,90,150,210,330,90,210,270,330,90,150,210,330,570,630,690,750,510,570,630,690,570,630,690,750];
					objcx = [120,1080];
					objcy = [120,420];
					posx = 90;
					posy = 690;
				}
				else if (gamestate == 29){
					objax = [30,90,150,210,270,270,270,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1050,1050,1050,1110,1170,1230,1290,1290,1290,1290,1230,1170,1170,1170,1170,1170,1170,1170,1170,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,150,150,150,150,150,150,150,150,150,90,30,30,30];
					objay = [30,30,30,30,30,90,150,210,210,210,210,210,210,210,210,210,210,210,210,210,210,150,90,30,30,30,30,30,90,150,210,210,210,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,630,570,510,450,390,330,270,210,210,210,150,90];
					objbx = [210,330,450,570,690,810,930,1050,270,390,510,630,750,870,990,1110,1125,1125,1125,1125,195,195,195];
					objby = [645,645,645,645,645,645,645,645,255,255,255,255,255,255,255,255,270,390,510,630,330,450,570];
					objcx = [120,210,1110];
					objcy = [120,630,630];
					posx = 1230;
					posy = 150;
				}
				else if (gamestate==30){
					objax = [30,90,150,210,270,330,390,450,510,570,630,690,750,810,870,930,990,1050,1110,1170,1230,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1290,1230,1170,1110,1050,990,930,870,810,750,690,630,570,510,450,390,330,270,210,210,210,150,90,30,30,30,30,30,30,30,30,30,30,30,30,30];
					objay = [30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,90,150,210,270,330,390,450,510,570,630,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,690,750,810,810,810,810,750,690,630,570,510,450,390,330,270,210,150,90];
					objbx = [90,210,330,450,570,690,810,930,1050,1170,150,270,390,510,630,750,870,990,1110,1230,360,330,390,330,390,1080,1050,1110,1050,1110,240,210,270,210,270,1200,1170,1230,1170,1230,120,90,150,90,150];
					objby = [645,645,645,645,645,645,645,645,645,645,75,75,75,75,75,75,75,75,75,75,360,330,330,390,390,240,210,210,270,270,480,450,450,510,510,120,90,90,150,150,600,570,570,630,630];
					objcx = [120,120,660,1200,1200];
					objcy = [120,720,360,120,600];
					posx = 90;
					posy = 750;
				}
				else if (gamestate==31){
					//display win game message	
					draw.fillStyle = "#FF00C8";
					draw.fillRect(0,0,w,h);
					draw.fillStyle = "#00C8FF";
					draw.font = "100px Arial";
					draw.fillText("Mission successful",w/2,h/2);
					draw.font = "30px Arial";
					time1 = Date.now();
					wintime = (time1 - time0)/1000;
					wintext = "completed mission in " + wintime + " seconds";
					draw.fillText(wintext,w/2,h/2+30);

				}

				if (gamestate>=0 && gamestate<=30){gameplay();}
			}

			function eventfunc00(x0,y0){
				if(x0>=w-300 && x0<=w-100 && y0>=h-140 && y0<=h-100){
					gamestate--;
					k.removeEventListener("touchstart",eventfunc01);
					k.removeEventListener("mousedown",eventfunc02);
					wingame();
    				}
			}
	
			const eventfunc01 = function(evt){
				evt.preventDefault();
				mousex = evt.touches[0].clientX - k.getBoundingClientRect().left;
				mousey = evt.touches[0].clientY - k.getBoundingClientRect().top;
    				eventfunc00(mousex, mousey);
			}

			const eventfunc02 = function(evt){
				mousex = evt.clientX - k.getBoundingClientRect().left;
    				mousey = evt.clientY - k.getBoundingClientRect().top;
				eventfunc00(mousex,mousey);
			}

			function losegame(){
				clearInterval(fps);

				//display lose game message
				draw.fillStyle = "#FF00C8";
				draw.fillRect(0,0,w,h);
				draw.fillStyle = "#00C8FF";
				draw.font = "100px Arial";
				draw.fillText("Mission failed",w/2,h/2);
				draw.font = "30px Arial";
				draw.fillText("You accidentally touched a blue circle",w/2,h/2+30);
				draw.fillText("Press proceed to restart",w/2,h/2+60);
				draw.fillRect(w-300,h-140,200,40);
				draw.fillStyle = "#FF00C8";
    				draw.font = "30px Arial";
    				draw.fillText("proceed", w-200, h-110);
				k.addEventListener("touchstart",eventfunc01);
				k.addEventListener("mousedown",eventfunc02);
			}

			startscreen();
		</script>
	</body>
</html>
